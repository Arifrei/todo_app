{% extends 'base.html' %}

{% block content %}
<div class="planner-page" data-folder-id="{{ folder_id or '' }}">
    <header class="header-row">
        <div>
            <h1><a class="planner-title-link" href="/planner">Planner</a></h1>
            <p class="u-text-muted">Everything to revisit later, gathered in one feed with tags to filter.</p>
            {% if folder_id %}
            <div class="planner-folder-breadcrumb">
                <div class="planner-folder-actions">
                    <button class="planner-folder-link" type="button" data-onclick="plannerGoBack()">
                        <i class="fa-solid fa-arrow-left"></i>
                        <span class="btn-text">Back</span>
                    </button>
                    <button class="planner-folder-link danger" type="button" data-onclick="deleteCurrentPlannerFolder()" title="Delete collection">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </div>
                <span class="planner-folder-name" id="planner-current-name">Collection</span>
            </div>
            {% endif %}
        </div>
        <div class="planner-fab" id="planner-fab">
            <button class="tasks-fab-main" id="planner-fab-main" aria-label="Add" aria-controls="planner-fab" aria-expanded="false">
                <i class="fa-solid fa-plus"></i>
            </button>
            <div class="planner-fab-options" id="planner-fab-options"></div>
        </div>
    </header>

    <div class="feed-add-form planner-simple-add-form" id="planner-simple-add-form">
        <div class="feed-add-row">
            <input type="text" id="planner-simple-input" class="feed-add-input" placeholder="Title; https://example.com; optional note">
            <button class="planner-simple-close" type="button" id="planner-simple-close" aria-label="Close">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        <div class="feed-add-hint">Format: Title; URL; optional short description. Press Enter to add to the feed.</div>
        <div class="feed-state-row">
            <div class="feed-state-chips" id="planner-tag-chips"></div>
            <div class="feed-state-add" id="planner-tag-add">
                <input type="text" class="feed-state-input" id="planner-tag-input" placeholder="Tag">
                <button class="feed-state-confirm" type="button" id="planner-tag-confirm" aria-label="Add tag">
                    <i class="fa-solid fa-check"></i>
                </button>
                <button class="feed-state-cancel" type="button" id="planner-tag-cancel" aria-label="Cancel">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="planner-content" id="planner-content"></div>
</div>

<div class="modal" id="planner-modal" role="dialog" aria-modal="true" aria-labelledby="planner-modal-title">
    <div class="modal-content planner-modal-content" tabindex="-1">
        <h2 id="planner-modal-title">Add</h2>
        <div id="planner-modal-body"></div>
        <div class="modal-actions">
            <button class="btn" type="button" data-onclick="closePlannerModal()">Cancel</button>
            <button class="btn btn-primary" type="button" id="planner-modal-submit">Save</button>
        </div>
    </div>
</div>

<div class="modal" id="planner-note-preview-modal" role="dialog" aria-modal="true" aria-labelledby="planner-note-preview-title">
    <div class="modal-content planner-note-preview-content" tabindex="-1">
        <div class="planner-note-preview-header">
            <h2 id="planner-note-preview-title">Note</h2>
            <button class="btn-icon" type="button" data-onclick="closePlannerNotePreview()" title="Close" aria-label="Close note preview">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        <div class="planner-note-preview-body" id="planner-note-preview-body"></div>
        <div class="modal-actions">
            <button class="btn btn-danger" type="button" id="planner-note-preview-delete">
                <i class="fa-solid fa-trash"></i> Delete
            </button>
            <div class="u-flex-1"></div>
            <button class="btn" type="button" data-onclick="closePlannerNotePreview()">Close</button>
            <button class="btn btn-primary" type="button" id="planner-note-preview-edit">
                <i class="fa-solid fa-pen"></i> Edit
            </button>
        </div>
    </div>
</div>

{% endblock %}

{% block page_scripts %}
<script src="{{ url_for('static', filename='pages/planner-page.js') }}" defer></script>
{% endblock %}





