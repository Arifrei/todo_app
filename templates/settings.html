{% extends 'base.html' %}

{% block content %}
<div class="page-header">
    <div>
        <h1>Settings</h1>
        <p class="u-text-muted u-m-0">Manage notifications and account security.</p>
    </div>
</div>

<div class="card u-max-w-800">
    <h3>Notification Preferences</h3>
    <p class="u-text-muted u-mt-0">Choose how reminders and updates are delivered.</p>
    <div class="settings-grid">
        <label class="setting-row">
            <div>
                <div class="setting-title">In-app notifications</div>
                <div class="setting-sub">Show alerts in the bell feed.</div>
            </div>
            <input type="checkbox" id="pref-in-app">
        </label>
        <label class="setting-row">
            <div>
                <div class="setting-title">Email notifications</div>
                <div class="setting-sub">Daily digest and reminders.</div>
            </div>
            <input type="checkbox" id="pref-email">
        </label>
        <label class="setting-row">
            <div>
                <div class="setting-title">Push notifications</div>
                <div class="setting-sub">Requires browser permission.</div>
            </div>
            <input type="checkbox" id="pref-push">
        </label>
        <label class="setting-row">
            <div>
                <div class="setting-title">Reminders</div>
                <div class="setting-sub">Calendar/task reminders.</div>
            </div>
            <input type="checkbox" id="pref-reminders">
        </label>
        <label class="setting-row">
            <div>
                <div class="setting-title">Daily digest</div>
                <div class="setting-sub">Summary email each morning.</div>
            </div>
            <input type="checkbox" id="pref-digest">
        </label>
        <label class="setting-row">
            <div>
                <div class="setting-title">Digest hour</div>
                <div class="setting-sub">Local hour to send the daily digest.</div>
            </div>
            <input type="number" id="pref-digest-hour" min="0" max="23" class="u-w-80">
        </label>
        <label class="setting-row">
            <div>
                <div class="setting-title">Snooze duration</div>
                <div class="setting-sub">Default minutes to snooze reminders.</div>
            </div>
            <input type="number" id="pref-snooze-minutes" min="1" max="120" class="u-w-80">
        </label>
    </div>
    <div class="u-mt-1 u-flex-row-gap-075 u-align-center">
        <button class="btn btn-secondary btn-small" id="pref-save-btn">
            <i class="fa-solid fa-floppy-disk"></i> Save
        </button>
        <button class="btn btn-ghost btn-small" id="pref-test-btn">
            <i class="fa-solid fa-paper-plane"></i> Send test (in-app)
        </button>
        <span id="pref-save-status" class="u-text-muted" aria-live="polite"></span>
    </div>
</div>

<div class="card u-max-w-800 u-mt-15">
    <h3>Account</h3>
    <p class="u-text-muted u-mt-0">Update your username or PIN.</p>
    <div class="settings-grid">
        <label class="setting-row">
            <div>
                <div class="setting-title">Username</div>
                <div class="setting-sub">Visible on the sidebar.</div>
            </div>
            <input type="text" id="account-username" class="form-control u-max-w-240">
        </label>
        <label class="setting-row">
            <div>
                <div class="setting-title">Current PIN</div>
                <div class="setting-sub">Required to save changes.</div>
            </div>
            <input type="password" id="account-current-pin" class="form-control u-max-w-140" maxlength="4" inputmode="numeric" pattern="[0-9]*">
        </label>
        <label class="setting-row">
            <div>
                <div class="setting-title">New PIN</div>
                <div class="setting-sub">Leave blank to keep your existing PIN.</div>
            </div>
            <input type="password" id="account-new-pin" class="form-control u-max-w-140" maxlength="4" inputmode="numeric" pattern="[0-9]*">
        </label>
        <label class="setting-row">
            <div>
                <div class="setting-title">Confirm PIN</div>
                <div class="setting-sub">Repeat the new PIN.</div>
            </div>
            <input type="password" id="account-confirm-pin" class="form-control u-max-w-140" maxlength="4" inputmode="numeric" pattern="[0-9]*">
        </label>
    </div>
    <div class="u-mt-1 u-flex-row-gap-075 u-align-center">
        <button class="btn btn-secondary btn-small" id="account-save-btn">
            <i class="fa-solid fa-floppy-disk"></i> Save
        </button>
        <span id="account-save-status" class="u-text-muted"></span>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<script src="{{ url_for('static', filename='settings.js') }}" defer></script>
{% endblock %}




