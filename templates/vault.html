{% extends 'base.html' %}

{% block content %}
<div class="vault-page">
    <header class="header-row vault-header">
        <div>
            <h1>Vault</h1>
            <p class="vault-subtitle">Your documents, organized.</p>
        </div>
        <div class="vault-header-actions">
            <div class="tasks-fab-container" id="vault-fab">
                <button class="tasks-fab-main" id="vault-fab-main" aria-label="Add">
                    <i class="fa-solid fa-plus"></i>
                </button>
                <div class="tasks-fab-options" id="vault-fab-options">
                    <button class="tasks-fab-option" type="button" id="vault-new-folder-btn">
                        <i class="fa-solid fa-folder-plus"></i>
                        <span>Folder</span>
                    </button>
                    <button class="tasks-fab-option" type="button" id="vault-upload-btn">
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                        <span>Upload</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="vault-toolbar">
        <nav class="vault-nav" id="vault-breadcrumb"></nav>
        <div class="vault-toolbar-right">
            <div class="vault-search-box" id="vault-search-box">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" id="vault-search-input" placeholder="Search files...">
                <button class="vault-search-clear" id="vault-search-clear" type="button" title="Clear">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <div class="vault-toolbar-actions">
                <select id="vault-sort-select" class="vault-sort-select" title="Sort by">
                    <option value="recent">Recent</option>
                    <option value="title">Name</option>
                    <option value="size">Size</option>
                    <option value="type">Type</option>
                </select>
                <button class="vault-view-btn" type="button" id="vault-view-toggle" title="Toggle view">
                    <i class="fa-solid fa-grip"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Bulk Action Bar -->
    <div class="bulk-actions u-hidden" id="vault-bulk-bar">
        <div class="bulk-left">
            <input type="checkbox" id="vault-select-all">
            <label for="vault-select-all" class="u-cursor-pointer">Select all</label>
            <span id="vault-bulk-count" class="u-text-muted u-ml-05"></span>
            <button class="btn btn-secondary btn-small u-ml-05" type="button" id="vault-bulk-clear">Clear</button>
        </div>
        <div class="bulk-buttons">
            <button class="btn btn-secondary" type="button" id="vault-bulk-pin">
                <i class="fa-solid fa-thumbtack"></i> Pin
            </button>
            <button class="btn btn-secondary" type="button" id="vault-bulk-move">
                <i class="fa-solid fa-folder"></i> Move
            </button>
            <button class="btn-icon delete" type="button" id="vault-bulk-delete" title="Delete selected" aria-label="Delete selected vault files">
                <i class="fa-solid fa-trash"></i>
            </button>
        </div>
    </div>

    <div class="vault-content" id="vault-content">
        <div class="vault-grid" id="vault-grid"></div>
    </div>

    <div class="vault-empty u-hidden" id="vault-empty">
        <div class="vault-empty-icon">
            <i class="fa-solid fa-folder-open"></i>
        </div>
        <h3>No files here yet</h3>
        <p>Upload documents or create folders to get started.</p>
        <button class="btn btn-primary" type="button" id="vault-empty-upload">
            <i class="fa-solid fa-cloud-arrow-up"></i> Upload files
        </button>
    </div>
</div>

<div class="modal" id="vault-folder-modal">
    <div class="modal-content vault-modal-content">
        <h2 id="vault-folder-modal-title">New Folder</h2>
        <div class="form-group">
            <label>Folder name</label>
            <input type="text" id="vault-folder-name" class="form-control" placeholder="Enter folder name...">
        </div>
        <input type="hidden" id="vault-folder-id">
        <div class="modal-actions">
            <button class="btn" type="button" id="vault-folder-cancel">Cancel</button>
            <button class="btn btn-primary" type="button" id="vault-folder-save">Save</button>
        </div>
    </div>
</div>

<div class="modal" id="vault-upload-modal">
    <div class="modal-content vault-modal-content vault-upload-content">
        <h2>Upload Files</h2>
        <div class="vault-drop-zone" id="vault-drop-zone">
            <div class="vault-drop-icon"><i class="fa-solid fa-cloud-arrow-up"></i></div>
            <div class="vault-drop-text">Drop files here or</div>
            <button class="btn btn-secondary" type="button" id="vault-browse-btn">Browse</button>
            <input type="file" id="vault-file-input" multiple>
        </div>
        <div class="vault-upload-files" id="vault-upload-files"></div>
        <div class="vault-upload-options">
            <div class="form-group">
                <label>Destination</label>
                <select id="vault-folder-select" class="form-control"></select>
            </div>
            <div class="form-group">
                <label>Tags <span class="form-hint">(comma separated)</span></label>
                <input type="text" id="vault-tags-input" class="form-control" placeholder="work, receipts, personal...">
            </div>
        </div>
        <div class="vault-upload-progress u-hidden" id="vault-upload-progress">
            <div class="vault-upload-bar" id="vault-upload-bar"></div>
        </div>
        <div class="modal-actions">
            <button class="btn" type="button" id="vault-upload-cancel">Cancel</button>
            <button class="btn btn-primary" type="button" id="vault-upload-submit">
                <i class="fa-solid fa-upload"></i> Upload
            </button>
        </div>
    </div>
</div>

<div class="modal" id="vault-preview-modal">
    <div class="modal-content vault-preview-content">
        <div class="vault-preview-header">
            <h2 id="vault-preview-title">Document</h2>
            <button class="btn-icon" type="button" id="vault-preview-close" title="Close" aria-label="Close preview">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        <div class="vault-preview-body" id="vault-preview-body"></div>
        <div class="vault-preview-actions">
            <button class="btn btn-danger" type="button" id="vault-preview-archive">
                <i class="fa-solid fa-box-archive"></i> Archive
            </button>
            <div class="u-flex-1"></div>
            <button class="btn" type="button" id="vault-preview-download">
                <i class="fa-solid fa-download"></i> Download
            </button>
        </div>
    </div>
</div>

{% endblock %}

{% block page_scripts %}
<script src="{{ url_for('static', filename='vault.js') }}" defer></script>
{% endblock %}




