{% extends 'base.html' %}

{% block content %}
<div class="notes-layout notes-editor-only" id="list-editor-page" data-note-id="{{ note_id or '' }}">
    <header class="notes-header">
        <div>
            <h1>List</h1>
        </div>
        <div class="notes-header-actions">
            <div class="list-search u-hidden" id="list-search">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input id="list-search-input" type="text" placeholder="Search list..." autocomplete="off" aria-label="Search list items">
                <button class="btn btn-icon-only" id="list-search-clear" aria-label="Clear search" title="Clear search">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <button class="btn btn-icon-only" id="list-back-btn" aria-label="Back" title="Back">
                <i class="fa-solid fa-arrow-left"></i>
            </button>
            <button class="btn btn-icon-only" id="list-notes-btn" aria-label="Notes" title="Notes">
                <i class="fa-solid fa-note-sticky"></i>
            </button>
            <button class="btn mobile-icon-only" id="list-cancel-btn" type="button" disabled>
                <i class="fa-solid fa-rotate-left"></i>
                <span class="btn-text">Cancel</span>
            </button>
            <button class="btn btn-primary" id="list-save-btn">
                <i class="fa-solid fa-floppy-disk"></i> Save
            </button>
            <div class="dropdown notes-actions-dropdown">
                <button class="btn btn-ghost btn-icon-only" id="list-actions-toggle" aria-label="More actions" title="More actions" aria-controls="list-actions-menu" aria-expanded="false">
                    <i class="fa-solid fa-ellipsis-vertical"></i>
                </button>
                <div class="dropdown-menu notes-actions-menu" id="list-actions-menu">
                    <button class="dropdown-item" id="list-select-toggle" type="button" aria-pressed="false">
                        <i class="fa-solid fa-check-square"></i> Select
                    </button>
                    <button class="dropdown-item" id="list-duplicates-btn">
                        <i class="fa-solid fa-clone"></i> Find duplicates
                    </button>
                    <button class="dropdown-item" id="list-search-toggle" type="button" aria-controls="list-search" aria-expanded="false">
                        <i class="fa-solid fa-magnifying-glass"></i> Search list
                    </button>
                    <button class="dropdown-item" id="list-share-btn">
                        <i class="fa-solid fa-share-nodes"></i> Share
                    </button>
                    <button class="dropdown-item" id="list-protect-btn">
                        <i class="fa-solid fa-lock"></i> <span>Protect</span>
                    </button>
                    <button class="dropdown-item" id="list-visibility-btn">
                        <i class="fa-solid fa-eye-slash"></i> <span>Hide from notes list</span>
                    </button>
                    <button class="dropdown-item" id="list-archive-btn">
                        <i class="fa-solid fa-box-archive"></i> <span>Archive</span>
                    </button>
                    <button class="dropdown-item danger" id="list-delete-btn">
                        <i class="fa-solid fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        </div>
    </header>

    <section class="notes-editor card list-editor-card">
        <div class="note-meta list-meta">
            <input id="list-title" type="text" placeholder="Untitled list" autocomplete="off" aria-label="List title" />
            <div class="note-meta-right list-meta-right">
                <label class="list-toggle">
                    <input type="checkbox" id="list-checkbox-toggle" />
                    <span>Checkboxes</span>
                </label>
                <span class="note-updated" id="list-updated-label">New list</span>
            </div>
        </div>

        <div class="list-editor-surface" id="list-editor-surface">
            <div class="list-pill-stack" id="list-pill-stack"></div>
        </div>
    </section>

    <!-- Bulk Action Bar -->
    <div class="bulk-actions list-bulk-bar u-hidden" id="list-bulk-bar">
        <div class="bulk-left">
            <input type="checkbox" id="list-select-all">
            <label for="list-select-all" class="u-cursor-pointer">Select all</label>
            <span id="list-bulk-count" class="u-text-muted u-ml-05">0 selected</span>
            <button class="btn btn-secondary btn-small u-ml-05" type="button" id="list-bulk-clear">Clear</button>
        </div>
        <div class="bulk-buttons">
            <div class="list-bulk-dropdown">
                <button class="btn btn-secondary btn-icon" id="list-bulk-more-toggle" title="More actions" aria-label="More bulk actions" type="button" aria-controls="list-bulk-more-menu" aria-expanded="false">
                    <i class="fa-solid fa-ellipsis"></i>
                </button>
                <div class="list-bulk-menu" id="list-bulk-more-menu">
                    <button class="dropdown-item" id="list-bulk-move-btn">
                        <i class="fa-solid fa-layer-group"></i> Move to section
                    </button>
                    <button class="dropdown-item" id="list-bulk-section-btn">
                        <i class="fa-solid fa-plus"></i> New section
                    </button>
                </div>
            </div>
            <button class="btn-icon delete" type="button" id="list-bulk-delete-btn" title="Delete selected" aria-label="Delete selected list items">
                <i class="fa-solid fa-trash"></i>
            </button>
            <button class="btn btn-secondary btn-small" type="button" id="list-bulk-done-btn" title="Done">
                Done
            </button>
        </div>
    </div>

    <div class="modal" id="list-section-modal" role="dialog" aria-modal="true" aria-labelledby="list-section-modal-title">
        <div class="modal-content" tabindex="-1">
            <h2 id="list-section-modal-title">New Section</h2>
            <div class="form-group">
                <label for="list-section-title">Section title</label>
                <input type="text" id="list-section-title" class="form-control" placeholder="Optional">
            </div>
            <div class="modal-actions">
                <button class="btn" id="list-section-cancel-btn">Cancel</button>
                <button class="btn btn-primary" id="list-section-save-btn">Create</button>
            </div>
        </div>
    </div>

    <div class="modal" id="list-duplicates-modal" role="dialog" aria-modal="true" aria-labelledby="list-duplicates-modal-title">
        <div class="modal-content list-duplicates-content" tabindex="-1">
            <h2 id="list-duplicates-modal-title">Possible duplicates</h2>
            <p id="list-duplicates-subtitle" class="u-muted-modal-msg">Scanning your list...</p>
            <div class="list-duplicates-list" id="list-duplicates-list"></div>
            <div class="modal-actions">
                <button class="btn btn-danger" id="list-duplicates-delete-selected-btn">Delete selected</button>
                <button class="btn" id="list-duplicates-close-btn">Close</button>
            </div>
        </div>
    </div>

    <!-- Linked Note Modal -->
    <div class="modal" id="note-link-modal" role="dialog" aria-modal="true" aria-labelledby="note-link-modal-title">
        <div class="modal-content u-max-w-520" tabindex="-1">
            <h2 id="note-link-modal-title">Link note</h2>
            <p class="note-link-subtitle" id="note-link-modal-subtitle">Choose an existing note or create a new one.</p>
            <div id="note-link-match-list" class="note-link-list"></div>
            <div class="note-link-create">
                <button class="btn btn-secondary" id="note-link-create-listed-btn">
                    <i class="fa-solid fa-eye"></i> Show in notes list
                </button>
                <button class="btn btn-secondary" id="note-link-create-hidden-btn">
                    <i class="fa-solid fa-eye-slash"></i> Linked-only (hidden)
                </button>
            </div>
            <div class="note-link-footer">
                <button class="btn" id="note-link-cancel-btn">Cancel</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<script src="{{ url_for('static', filename='app/core.js') }}" defer></script>
<script src="{{ url_for('static', filename='notes/detail.js') }}" defer></script>
<script src="{{ url_for('static', filename='notes/editor.js') }}" defer></script>
<script src="{{ url_for('static', filename='notes/list-editor.js') }}" defer></script>
{% endblock %}




